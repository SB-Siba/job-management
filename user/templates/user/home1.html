{% extends 'user/index.html' %}
{% load static %}
{% block title %}
Home Page
{% endblock title %}
{% block main_content %}
<style>

</style>    
    <div class="container">
        <div class="row">
            <div class="col-lg-12 col-12">
                <div class="text-center mb-5 pb-2">
                    <div id="carouselExample" class="carousel slide">
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img src="{% static 'images/d3.jpg' %}" class="d-block w-100" height="600rem" width="60%" alt="...">
                                <div class="carousel-caption d-none d-md-block">
                                    <h5  style="color:#6f827d" >Welcome to Pravati International Services Private Limited</h5>
                                    
                                    <p style="color:#d43520">Provide emergency medical care,
                                        stabilize patients, and transport them
                                        to medical facilities. They respond to
                                        emergency calls, perform CPR,
                                        administer oxygen, and use
                                        defibrillators.</p>
                                </div>
                                <a href="javascript:void()" id="quickbooks-widget" class="btn-quick-book-popup">Book Appointment</a>
                            </div>
                            <div class="carousel-item">
                                <img src="{% static 'images/dd2.jpg' %}" class="d-block w-100" height="600rem" width="60%" alt="...">
                                <div class="carousel-caption d-none d-md-block">
                                    <h5  style="color: #03fcad;">Quality Services</h5>
                                    <p style="color: #03fcad;"> One of the affordable place in your price range with all in one package all amenities.
                                         Good ambience, customer friendly service and food. Rooms are clean and maintenance is good
                                    </p>
                                </div>
                               
                            </div>
                            <div class="carousel-item">
                                <img src="{% static 'images/dd3.0.jpg' %}" class="d-block w-100" height="600rem" width="60%" alt="...">
                                <div class="carousel-caption d-none d-md-block">
                                    <h5 style="color: #2e2727;">Professional Team</h5>
                                    <p style="color: #2e2727">Industrial Training Institutes (ITIs) offer
                                        technical education in various trades
                                        and skills that prepare students for
                                        employment in specific industries. ITIs
                                        focus on providing vocational training
                                        to develop skilled technicians and
                                        craftsmen.</p>
                                </div>
                            </div>
                            <div class="carousel-item">
                                <img src="{% static 'images/dd4.jpg' %}" class="d-block w-100" height="600rem" width="60%" alt="...">
                                <div class="carousel-caption d-none d-md-block">
                                    <h5  style="color: #03fcad;">Innovative Solutions</h5>
                                    <p  style="color: #03fcad;">Perform various administrative
                                        functions such as data management,
                                        filing, and document preparation.</p>
                                </div>
                            </div>
                            <div class="carousel-item">
                                <img src="{% static 'images/dd5.0.jpg' %}" class="d-block w-100" height="600rem" width="60%" alt="...">
                                <div class="carousel-caption d-none d-md-block">
                                    <h5  style="color: #03fcad;">Customer Satisfaction</h5>
                                    <p  style="color: #03fcad;">Greet and assist visitors, patients, or
                                        clients. Answer phone calls and direct
                                        them to the appropriate personnel.
                                        </p>
                                </div>
                            </div>
                            <div class="carousel-item">
                                <img src="{% static 'images/dd6.jpg' %}" class="d-block w-100" height="600rem" width="60%" alt="...">
                                <div class="carousel-caption d-none d-md-block">
                                    <h5>Reliable Support</h5>
                                    <p  style="color:#ede8e9">We place our clients at the
                                        center of everything we do, striving to exceed their
                                        expectations and foster long-term relationships.
                                        </p>
                                </div>
                            </div>
                            <div class="carousel-item">
                                <img src="{% static 'images/dd7.1.jpg' %}" class="d-block w-100" height="600rem" width="60%" alt="...">
                                <div class="carousel-caption d-none d-md-block">
                                    <h5 >Comprehensive Services</h5>
                                    <p  style="color:#ede8e9">Perform various administrative
                                        functions such as data management,
                                        filing, and document preparation.</p>
                                </div>
                            </div>
                        </div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Previous</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Next</span>
                        </button>
                    </div>
                    <h3 class="text-black">WELCOME TO PRAVATI INTERNATIONAL</h3>
                    <h3 class="text-black">SERVICES PRIVATE LIMITED</h3>
            
                    <!-- <a href="#section_2" class="btn custom-btn smoothscroll mt-3">Click Here</a> -->
                </div>
            
                {% for book in audioBookss %}
                <div class="owl-carousel-info-wrap item">
                    <img src="{{ book.audiobook_image.url }}" class="owl-carousel-image img-fluid" alt="" style="height: 4000px;">
                    <div class="owl-carousel-info">
                        <small class="mb-2">{{ book.title }}</small><br>
                        <span class="badge">{{ book.book_discount_price }}</span>
                        <span class="badge bg-danger" style="text-decoration: line-through;">{{ book.book_max_price }}</span>
                    </div>
                    <div class="social-share">
                        <ul class="social-icon">
                            <li class="social-icon-item">
                                <a href="" class="social-icon-link fa fa-info-circle"></a>
                            </li>
                            <li class="social-icon-item">
                                <form action="" method="post">
                                    {% csrf_token %}
                                    <input type="hidden" name="product_id" value="{{ book.id }}">
                                    <input type="hidden" name="quantity" value="1">
                                    <button type="submit" class="social-icon-link fas fa-shopping-cart"></button>
                                </form>
                            </li>
                        </ul>
                    </div>
                </div>
                {% endfor %}
            </div>
            

        </div>
    </div>
</section>


<section class="latest-podcast-section section-padding pb-0" id="section_2">
    <div class="container">
        <div class="row justify-content-center">

            </div>
            {% for a_book in recent_audioBooks %}
            <div class="col-lg-6 col-12 mb-4 mb-lg-0">
                <div class="custom-block d-flex">
                    <div class="">
                        <div class="custom-block-icon-wrap">
                            <div class="section-overlay"></div>
                            <a href="detail-page.html" class="custom-block-image-wrap">
                                <img src="{{a_book.audiobook_image.url}}" class="custom-block-image img-fluid" alt="">

                                <a href="" class="custom-block-icon">
                                    <li class="social-icon-item">
                                        <i class="social-icon-link fa fa-info-circle"></i>
                                    </li>
                                </a>
                            </a>
                        </div>

                        <div class="mt-2">
                            <a href="" class="btn custom-btn">
                                Subscribe
                            </a>
                        </div>
                    </div>

                    <div class="custom-block-info">
                        <h5 class="mb-2">
                            <a href="">
                                {{a_book.title}}
                            </a>
                        </h5>



                        <p class="mb-0 scrollable"><small>{{ a_book.description }}</small></p>

                    </div>
                </div>
            </div>
            {% endfor %}


        </div>
    </div>
</section>
<!-- Category wise products -->

          
                    {% for category in category_obj %}
                    <div><a href="#" class="category-link" data-category="{{ category.title }}">{{ category.title }}</a>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>

    <div class="container" >
        <div class="row" id="productList">
            
        </div>
    </div>

</section>


            {% for t_book,e_count in booksandepisode %}
            <div class="col-lg-3 col-md-6 col-12 mb-4 mb-lg-0">
                <div class="custom-block custom-block-overlay">
                    <a href="" class="custom-block-image-wrap">
                        <img src="{{t_book.audiobook_image.url}}" class="custom-block-image img-fluid" alt="">
                    </a>

                    <div class="custom-block-info custom-block-overlay-info">
                        <h5 class="mb-1">
                            <a href="">
                                <small>Details</small>
                            </a>
                        </h5>

                        <p class="badge mb-0">Episodes - {{e_count}}</p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endblock main_content %}

{% block js_block %}
<script>
    document.addEventListener('DOMContentLoaded', function () {
        fetchProducts(""); // Fetch all products initially

        document.querySelectorAll('.category-link').forEach(function (link) {
            link.addEventListener('click', function (event) {
                event.preventDefault();
                document.querySelectorAll('.category-link').forEach(function (link) {
                    link.classList.remove('active');
                });
                // Add 'active' class to the clicked link
                this.classList.add('active');
                var category = this.getAttribute('data-category');
                fetchProducts(category); // Fetch products based on the selected category
                console.log(category)
            });
        });
    });

    function fetchProducts(category) {
        var url = "/filter-books/?category=" + encodeURIComponent(category);
        fetch(url)
            .then(response => response.json())
            .then(data => {

                var productList = document.getElementById('productList');
                productList.innerHTML = '';
                if (data.length === 0) {
                    productList.innerHTML = '<div class="d-flex justify-content-center fw-bold">No products available</div>';
                } else {
                    data.forEach(product => {
                        var productHTML = `
                            <div class="col-lg-3 col-md-6 col-12 mb-4 mb-lg-0">
                                <div class="custom-block custom-block-overlay">
                                    <a href="/productdetails/${product.id}" class="custom-block-image-wrap">
                                        <img src="${product.image_url}" class="custom-block-image img-fluid" alt="">
                                    </a>
                                    <div class="custom-block-info custom-block-overlay-info">
                                        <div class="mb-1"style="height: 50px;">
                                            <a href="">
                                                ${product.name}
                                            </a>
                                        </div>
                                        <div class="audio-container my-1 d-flex justify-content-center">
                                            <audio id="audio-${product.id}" src="${product.audio_file_url}"></audio>
                                            <a class="playpause-btn" onclick="togglePlayPause('audio-${product.id}',this)">
                                                <i class="social-icon-link fa fa-play"></i>
                                            </a>
                                        </div>
                                        <div class="d-flex justify-content-between">
                                            <p class="badge mb-0 bg-danger" style="text-decoration: line-through;">OldPrice: ${product.old_price}</p>
                                            <p class="badge mb-0 bg-success">Price: ${product.price}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;
                        productList.innerHTML += productHTML;
                    });
                }
            })
            .catch(error => {
                console.error('Error fetching products:', error);
            });
    }
    function togglePlayPause(audioId, button) {
        var audio = document.getElementById(audioId);
        if (audio.paused) {
            audio.play();
            button.innerHTML = '<i class="social-icon-link fa fa-pause"></i>';
        } else {
            audio.pause();
            button.innerHTML = '<i class="social-icon-link fa fa-play"></i>';
        }
    }
</script>
{% endblock js_block %}