{% extends 'admin_dashboard/starter.html' %} 
{% load static %} 

{% block content %}
<style>
    .create_test {
        width: 70%;
        font-family: Merriweather;
        padding: 40px;
        box-shadow: 0 2px 12px hsla(247, 88%, 70%, .3);
        border-radius: 15px !important;
        background: transparent;
    }
    
    .gap-4 {
        display: flex;
        justify-content: center;
    }

    th, td {
        border: 1px solid #ccc; /* Add border to each cell */
        padding: 10px; /* Add padding for better spacing */
        text-align: left; /* Align header text to the left */
    }

    th {
        background-color: #f2f2f2; /* Light background for headers */
        font-weight: bold; /* Bold text for headers */
    }

    tr:nth-child(even) {
        background-color: #f9f9f9; /* Zebra stripe effect for rows */
    }

    tr:hover {
        background-color: rgb(244, 212, 169); /* Highlight on hover */
    }

    .create_test form {
        margin-top: 21px;
        width: 100%;
        margin-left: auto;
        margin-right: auto;
        margin-bottom: 2rem;
    }

    .section-header {
        background-color: #eaeaea; /* Header background for sections */
        font-weight: bold; /* Make section headers bold */
        text-align: center; /* Center align the section header text */
    }
</style>

<div class="gap-4 py-5">
    <div class="create_test">
        <!-- <h1 class="mb-5">Job Details</h1> -->
        
        <!-- Job Details Table -->
        <table style="width: 100%; border-collapse: collapse;">
            <!-- Job Details Section -->
            <tr class="section-header">
                <th colspan="2">Job Information</th>
            </tr>
            <tr>
                <th>ID</th>
                <td>{{ job.id }}</td>
            </tr>
            <tr>
                <th>Company Logo</th>
                <td>
                    {% if job.company_logo %}
                    <img src="{{ job.company_logo.url }}" alt="Company Logo" width="100" />
                    {% else %} No logo available {% endif %}
                </td>
            </tr>
            <tr>
                <th>Company Name</th>
                <td>{{ job.company_name }}</td>
            </tr>
            <tr>
                <th>Company Website</th>
                <td><a href="{{ job.company_website }}">{{ job.company_website | truncatechars:30 }}</a></td>
            </tr>
            <tr>
                <th>Category</th>
                <td>{{ job.category.title }}</td>
            </tr>
            <tr>
                <th>Sector</th>
                <td>{{ job.sector }}</td>
            </tr>
            <tr>
                <th>Description</th>
                <td>{{ job.description }}</td>
            </tr>
            <tr>
                <th>Location</th>
                <td>{{ job.location }}</td>
            </tr>
            <tr>
                <th>Posted At</th>
                <td>{{ job.posted_at }}</td>
            </tr>
            <tr>
                <th>Status</th>
                <td>{{ job.status }}</td>
            </tr>
            <tr>
                <th>Expiry Date</th>
                <td>{{ job.expiry_date }}</td>
            </tr>
            <tr>
                <th>Vacancies</th>
                <td>{{ job.vacancies }}</td>
            </tr>
            <tr>
                <th>Number of Applications</th>
                <td>{{ applications_count }}</td>
            </tr>
            <tr>
                <th>Job Type</th>
                <td>{{ job.job_type }}</td>
            </tr>
            <tr>
                <th>Updated At</th>
                <td>{{ job.updated_at }}</td>
            </tr>
        </table>

        <br> <!-- Add space between tables -->

        <!-- Applications Table -->
        <table style="width: 100%; border-collapse: collapse;">
            <tr class="section-header">
                <th colspan="3" style="text-align: center;">Application List</th> <!-- Centered header -->
            </tr>
            <tr>
                <th>User Name</th>
                <th>Email</th>
                <th>Contact</th>
            </tr>
            {% for application in applications %}
            <tr>
                <td>{{ application.user.full_name }}</td>
                <td>{{ application.email }}</td>
                <td>{{ application.contact }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="3">No applications found.</td>
            </tr>
            {% endfor %}
        </table>

        <a href="{% url 'admin_dashboard:job_list' %}">Back to Job List</a>
    </div>
</div>
{% endblock content %}
