{% extends 'shoppingsite/base.html' %}
{% load static %}
{% block title %}
Cart Page
{% endblock title %}

{% block main-content %}

<header class="py-3">
    <div class="container">
        <h1 class="text-muted">Hey {{user.full_name}} Your Cart is here.</h1>
    </div>
</header>

<section class="container my-5">
    <div class="row">
        <div class="col-md-8">
            {% if products|length > 0 %}
            <!-- Cart Items List -->
            <table class="table">
                <thead>
                    <th class="cart-product-remove">Product Image</th>
                    <th class="cart-product-image">Product & Price</th>
                    <th class="cart-product-info">Quantity</th>
                    <th class="cart-product-remove">Remove</th> <!-- Add an empty th for the remove icon -->
                </thead>
                <tbody>
                    {% for key,value in products.items %}
                    <tr>
                        <td class="cart-product-image" style="width: 25%;">
                            <a>
                                <img src="{{key.audiobook_image.url}}" class="img-thumbnail" alt="avatar2"
                                    style="height: 100px; width: 100px;">
                            </a>
                        </td>
                        <td>
                            {{key.title}}
                            <p><i class="fa fa-inr" aria-hidden="true"></i>&nbsp;{{key.book_discount_price}}</p>
                        </td>
                        <td>
                            <div class='d-flex'>
                                <a href="{% url 'shoppingsite:managecart' key.uid %}?operation=plus" class="mt-1"><i
                                        style="color:green;margin-right:10px;" class="fas fa-plus-square"></i></a>
                                <input type="number" style="width: 50px;" class="form-control" value="{{value}}"
                                    readonly />
                                <a href="{% url 'shoppingsite:managecart' key.uid %}?operation=min" class="mt-1"><i
                                        style="color:red;margin-left:10px;" class="fas fa-minus-square"></i></a>
                            </div>
                        </td>
                        <td><a href="{% url 'shoppingsite:removefromcart' cartItems.id key.title %}"
                                style="margin-left: 15%;"><i class="fa fa-trash fs-2 text-danger"
                                    aria-hidden="true"></i></a></td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
            <h1 class="text-center">Your cart is empty !!!</h1>
            {% endif %}
            <!-- Add more cart items here -->
        </div>

        <div class="col-md-4">
            <!-- Cart Summary -->
            <div class="border p-3 mb-3">
                <h3 class="mb-3">Cart Summary</h3>
                <div class="d-flex justify-content-between">
                    <span>Price : </span>
                    <span class="fw-bold"><i class="fa fa-inr"
                            aria-hidden="true"></i>&nbsp;{{totaloriginalprice}}</span>
                </div>
                <div class="d-flex justify-content-between">
                    <span>Ourprice : </span>
                    <span class="fw-bold"><i class="fa fa-inr" aria-hidden="true"></i>&nbsp;{{totalPrice}}</span>
                </div>
                <div class="d-flex justify-content-between">
                    <span>Discount : </span>
                    <span class="fw-medium text-danger"><i class="fa fa-inr"
                            aria-hidden="true"></i>&nbsp;{{discount_price}}</span>
                </div>
                <div class="d-flex justify-content-between">
                    <span>GST : </span>
                    <span class="fw-medium text-info"><i class="fa fa-inr" aria-hidden="true"></i>&nbsp;{{GST}}</span>
                </div>
                <!-- <div class="d-flex justify-content-between">
                    <span>Delivery Charge : </span>
                    <span class="fw-medium text-info"><i class="fa fa-inr"
                            aria-hidden="true"></i>&nbsp;{{Delivary}}</span>
                </div> -->
                <div class="d-flex justify-content-between fw-bold">
                    <span>Total : </span>
                    <span><i class="fa fa-inr" aria-hidden="true"></i>&nbsp;{{final_cart_value}}</span>
                </div>
                {% if products|length > 0 %}
                <a href="{% url 'shoppingsite:paymentsuccess' cartItems.id %}"
                    class="btn btn-warning w-100 mt-3">Proceed to Checkout</a>
                {% else %}
                <a href="" class="btn btn-warning w-100 mt-3">Proceed to Checkout</a>
                {% endif %}

            </div>
        </div>
    </div>
</section>
{% endblock main-content %}